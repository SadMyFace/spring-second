<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec"%>
    
<jsp:include page="../layout/header.jsp"></jsp:include> 

<sec:authentication property="principal.mvo.authList" var="auths"/>
<c:set value="${mvo }" var="m" ></c:set>
<div class="container-md">
	<h2>Member Modify Page</h2> <br>
	
	<form action="/member/modify" method="post">
		<div class="mb-3">
	  		<label for="e" class="form-label">Email</label>
	  		<input type="text" name="email" class="form-control" id="e" value="${m.email }">
		</div>
		<div class="mb-3">
	  		<label for="p" class="form-label">Password</label>
	  		<input type="password" name="pwd" class="form-control" id="p" placeholder="Password">
		</div>
		<div class="mb-3">
	  		<label for="n" class="form-label">NickName</label>
	  		<input type="text" name="nickName" class="form-control" id="n" value="${m.nickName }">
		</div>
		<!-- 해당 멤버의 권한을 출력(2개일 수도 있음 -->
		<c:choose>
			<c:when test="${auths.stream().anyMatch(authVO -> authVO.auth.equals('ROLE_ADMIN')).get() }">
				ADMIN
			</c:when>
			<c:when test="${auths.stream().anyMatch(authVO -> authVO.auth.equals('ROLE_USER')).get() }">
				USER
			</c:when>
		</c:choose>
		${m.auth}
		<button type="submit" class="btn btn-primary">Modify</button>
	</form>
</div>


<jsp:include page="../layout/footer.jsp"></jsp:include> 